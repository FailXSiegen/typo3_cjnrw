<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	  xmlns:n="http://typo3.org/ns/GeorgRinger/News/ViewHelpers"
	  data-namespace-typo3-fluid="true">
<n:excludeDisplayedNews newsItem="{newsItem}" />

<div class="col-md-6 col-lg-4 mb-4">
	<div class="card pb-3 h-100 {f:if(condition: newsItem.istopnews, then: 'shadow-lg border-primary border-2', else: 'shadow-sm')} articletype-{newsItem.type}" itemscope="itemscope" itemtype="http://schema.org/Article">

		<f:if condition="{newsItem.istopnews}">
			<div class="position-absolute top-0 end-0 m-3" style="z-index: 10;">
				<span class="badge bg-primary shadow-sm px-3 py-2">
					<i class="fas fa-bookmark me-1"></i> Top
				</span>
			</div>
		</f:if>

		<f:if condition="{newsItem.mediaPreviews}">
			<f:variable name="newsWidth" value="600c" />
			<f:variable name="newsHeight" value="400c" />
			<f:variable name="newsDimensions" value="{width: newsWidth, height: newsHeight}" />

			<f:if condition="{newsItem.hideMore}">
				<f:then>
					<f:render
						partial="Media/Rendering/Image"
						arguments="{
							file: newsItem.mediaPreviews.0,
							dimensions: newsDimensions,
							class: 'img img-fluid card-img-top'
						}" />
				</f:then>
				<f:else>
					<n:link newsItem="{newsItem}" settings="{settings}" title="{newsItem.title}">
						<f:render
							partial="Media/Rendering/Image"
							arguments="{
								file: newsItem.mediaPreviews.0,
								dimensions: newsDimensions,
								class: 'img img-fluid card-img-top'
							}" />
					</n:link>
				</f:else>
			</f:if>
		</f:if>

		<div class="card-body d-flex flex-column pt-3">
			<span class="px-3">
				<f:render partial="General/AdditionalInformation" arguments="{settings:settings,newsItem:newsItem}" />
			</span>
			<span class="h5 card-title px-3 py-2 {f:if(condition: newsItem.istopnews, then: 'fw-bold bg-primary text-white w-100', else: 'fw-bold')}" itemprop="headline">
				<f:if condition="{newsItem.hideMore}">
					<f:then>
						{newsItem.title}
					</f:then>
					<f:else>
						<n:link newsItem="{newsItem}" settings="{settings}" title="{newsItem.title}" class="text-decoration-none {f:if(condition: newsItem.istopnews, then: 'text-white', else: 'text-dark')}" additionalAttributes="{itemprop:'url'}">
							{newsItem.title}
						</n:link>
					</f:else>
				</f:if>
			</span>

			<div class="card-text flex-grow-1 px-3" itemprop="description">
				<f:if condition="{newsItem.hideMore}">
					<f:then>
						{newsItem.bodytext -> f:format.html()}
					</f:then>
					<f:else>
						<n:removeMediaTags>
							<f:if condition="{newsItem.teaser}">
								<f:then>
									{newsItem.teaser -> f:format.crop(maxCharacters: '{settings.cropMaxCharacters}', respectWordBoundaries:'1') -> f:format.html()}
								</f:then>
								<f:else>
									{newsItem.bodytext -> f:format.crop(maxCharacters: '{settings.cropMaxCharacters}', respectWordBoundaries:'1') -> f:format.html()}
								</f:else>
							</f:if>
						</n:removeMediaTags>
					</f:else>
				</f:if>
			</div>

			<f:if condition="{newsItem.hideMore}">
				<f:else>
					<div class="mt-3 px-3">
						<n:link newsItem="{newsItem}" settings="{settings}" class="btn btn-primary text-white" title="{newsItem.title}">
							<f:translate key="more-link" />
						</n:link>
					</div>
				</f:else>
			</f:if>
		</div>
	</div>
</div>
</html>
